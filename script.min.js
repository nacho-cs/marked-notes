function parse(){document.querySelector("#output").innerHTML=DOMPurify.sanitize(window.markdownit().render(document.querySelector("textarea").value)),localStorage.setItem("text",document.querySelector("textarea").value),document.title=""+(null==document.querySelector("#output").firstChild?"• marked notes":"• "+document.querySelector("#output").firstChild.innerText)}function URLtoInput(){const url=new URL(window.location),notes=new URLSearchParams(url.search).get("notes");document.querySelector("textarea").value=notes}function addtoURL(){const url=new URL(window.location),notes=document.querySelector("textarea").value;url.searchParams.set("notes",notes),window.history.pushState(null,null,url)}function exportNotes(){domtoimage.toPng(document.querySelector("#output")).then((url=>{const link=document.createElement("a");link.href=url,link.download=`${document.title}.png`,link.click()})).catch((err=>{document.querySelector("#show-cors-error").classList.remove("visually-hidden"),console.log(err)}))}function hide(){document.querySelector("#input").classList.toggle("visually-hidden"),document.querySelector("#output").classList.toggle("col-6"),document.querySelector("#output").classList.toggle("col"),document.querySelector("#collapse").innerText=document.querySelector("#collapse").innerText.includes("back")?"arrow_forward_ios":"arrow_back_ios"}function copyLink(){navigator.clipboard.writeText(window.location.href),document.querySelector("#copy-link").classList.remove("visually-hidden")}function copyNotes(){navigator.clipboard.writeText(document.querySelector("textarea").value),document.querySelector("#copy-notes").classList.remove("visually-hidden")}function exportAsHtml(){navigator.clipboard.writeText(`${document.head.innerHTML}<body class="markdown-body" style="padding: 15px; width: 50%">${document.querySelector("#output").innerHTML}</body>`),document.querySelector("#copy-html").classList.remove("visually-hidden")}function applyDarkMode(){document.querySelectorAll(".dark").length>0&&document.querySelectorAll("img").forEach((img=>img.classList.toggle("dark")))}function calculateWordCount(){const input=document.querySelector("textarea").value;document.querySelector("#count").innerText=`${input.split("\n").length} Lines • ${input.split("").length} Bytes • Col ${input.split("\n")[input.split("\n").length-1].length}, Line ${input.split("\n").length}`}document.querySelector("textarea").addEventListener("input",(()=>{parse(),addtoURL(),hljs.highlightAll(),applyDarkMode(),calculateWordCount(),renderMathInElement(document.querySelector("#output"),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",URLtoInput):URLtoInput();